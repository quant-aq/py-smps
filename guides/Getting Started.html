<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Visualizations" href="Visualizations.html" /><link rel="prev" title="Guides" href="index.html" />

    <meta name="generator" content="sphinx-4.5.0, furo 2022.09.29"/>
        <title>An introduction to py-smps - py-smps 2.1.0a3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">py-smps 2.1.0a3 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">py-smps 2.1.0a3 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Guides</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">An introduction to py-smps</a></li>
<li class="toctree-l2"><a class="reference internal" href="Visualizations.html">Visualizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Fitting%20Curves.html">Fitting Curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="Advanced%20Usage.html">Advanced Usage</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../development/index.html">Contributing</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/support.html">Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/issues.html">Reporting Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/contributions.html">Contributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/tests.html">Tests</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.GenericParticleSizer.html">smps.GenericParticleSizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.SMPS.html">smps.SMPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.Grimm11D.html">smps.Grimm11D</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.POPS.html">smps.POPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.ParticlesPlus.html">smps.ParticlesPlus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.AlphasenseOPCN2.html">smps.AlphasenseOPCN2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.AlphasenseOPCN3.html">smps.AlphasenseOPCN3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.Modulair.html">smps.Modulair</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.ModulairPM.html">smps.ModulairPM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.io.smps_from_txt.html">smps.io.smps_from_txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.io.load_sample.html">smps.io.load_sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.utils.make_bins.html">smps.utils.make_bins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.plots.heatmap.html">smps.plots.heatmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.plots.histplot.html">smps.plots.histplot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.fit.LogNormal.html">smps.fit.LogNormal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/smps.fit.LogNormalFitResults.html">smps.fit.LogNormalFitResults</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/quant-aq/py-smps">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/py-smps/">PyPI</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="An-introduction-to-py-smps">
<h1>An introduction to py-smps<a class="headerlink" href="#An-introduction-to-py-smps" title="Permalink to this headline">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">py-smps</span></code> is a general-purpose library designed to make analyzing size-resolved aerosol data as easy and repeatable as possible. It is not meant to cover all possible instruments (by default, at least) or use cases (at least, not yet!). This guide should give you an overview of the capabilities of the software, but will not be completely comprehensive. Please read through the API documentation if you have any questions or post to the
<a class="reference external" href="https://github.com/quant-aq/py-smps/discussions">discusssions</a> section of the GitHub repository.</p>
<div class="section" id="Working-with-data">
<h2>Working with data<a class="headerlink" href="#Working-with-data" title="Permalink to this headline">#</a></h2>
<p>The data format for each make and model of particle-sizer instrument is going to be different depending on the manufacturer’s specifications and how you have gone about logging the data. This library includes a few helper functions for common instruments (e.g., TSI SMPS), but there are some general requirements that all instruments and datasets need to follow in order to work with this library:</p>
<ol class="arabic simple">
<li><p>The raw data must be a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> DataFrame (<code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code>). If you’re unfamiliar with the <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, it may be a good idea to read one of the many great online tutorials or read through the docs <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html">here</a>.</p></li>
<li><p>The index of the DataFrame should be a time series (though, it is not explicitly required)</p></li>
<li><p>There must be a unique column (and column name) for each particle size bin</p></li>
</ol>
<p>So long as the above requirements are met, you should be able to use this library to analyze your data.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">smps</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>

<span class="c1"># Filter out the warnings for this guide</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;notebook&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;ticks&#39;</span><span class="p">,</span> <span class="n">font_scale</span><span class="o">=</span><span class="mf">1.25</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;colorblind&#39;</span><span class="p">)</span>

<span class="c1"># Set the default smps visuals</span>
<span class="n">smps</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="Example-datasets">
<h3>Example datasets<a class="headerlink" href="#Example-datasets" title="Permalink to this headline">#</a></h3>
<p>The library includes a few example datasets to help you get up and running with examples and understand the desired structure of the data. To import a sample SMPS dataset from Boston, you can use the <code class="docutils literal notranslate"><span class="pre">load_sample</span></code> helper function:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bos</span> <span class="o">=</span> <span class="n">smps</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_sample</span><span class="p">(</span><span class="s1">&#39;boston&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Working-with-SMPS-data-from-AIM">
<h3>Working with SMPS data from AIM<a class="headerlink" href="#Working-with-SMPS-data-from-AIM" title="Permalink to this headline">#</a></h3>
<p>TSI’s AIM software allows you to export data to analyze offline. There is a loader function (<code class="docutils literal notranslate"><span class="pre">smps.io.load_file</span></code>) to help you load and work with data specifically from AIM; however, each version of AIM is slightly different and isn’t always labeled with the correct version making it difficult to maintain a general-purpose loader for these files. If your attempt to load data from AIM using the helper function is unsuccessful, please open an issue on the GitHub repository so that we can add
support for your version of AIM or otherwise help you navigate the process.</p>
</div>
<div class="section" id="Working-with-data-via-a-csv-file">
<h3>Working with data via a csv file<a class="headerlink" href="#Working-with-data-via-a-csv-file" title="Permalink to this headline">#</a></h3>
<p>If your data is in csv format, you can use native <code class="docutils literal notranslate"><span class="pre">pandas</span></code> to load your data and ensure it is in the correct format. Below, we use a sample file available in the GitHub repository from a QuantAQ MODULAIR-PM device to demonstrate how you can load the data, convert the timestamp column to a python datetime object, and get it ready for analysis.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the file into a pandas dataframe</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="s2">&quot;https://raw.githubusercontent.com/quant-aq/py-smps/master/tests/datafiles/MOD-PM-SAMPLE.csv&quot;</span><span class="p">,</span>
    <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;timestamp&#39;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
DatetimeIndex: 1009 entries, 2022-02-15 21:27:30+00:00 to 2022-02-15 04:39:32+00:00
Data columns (total 54 columns):
 #   Column           Non-Null Count  Dtype
---  ------           --------------  -----
 0   id               1009 non-null   int64
 1   timestamp_local  1009 non-null   object
 2   sn               1009 non-null   object
 3   sample_rh        1009 non-null   float64
 4   sample_temp      1009 non-null   float64
 5   sample_pres      1009 non-null   int64
 6   bin0             1009 non-null   float64
 7   bin1             1009 non-null   float64
 8   bin2             1009 non-null   float64
 9   bin3             1009 non-null   float64
 10  bin4             1009 non-null   float64
 11  bin5             1009 non-null   float64
 12  bin6             1009 non-null   float64
 13  bin7             1009 non-null   float64
 14  bin8             1009 non-null   float64
 15  bin9             1009 non-null   float64
 16  bin10            1009 non-null   float64
 17  bin11            1009 non-null   float64
 18  bin12            1009 non-null   float64
 19  bin13            1009 non-null   float64
 20  bin14            1009 non-null   float64
 21  bin15            1009 non-null   float64
 22  bin16            1009 non-null   float64
 23  bin17            1009 non-null   float64
 24  bin18            1009 non-null   float64
 25  bin19            1009 non-null   float64
 26  bin20            1009 non-null   float64
 27  bin21            1009 non-null   int64
 28  bin22            1009 non-null   int64
 29  bin23            1009 non-null   float64
 30  opcn3_temp       1009 non-null   int64
 31  opcn3_rh         1009 non-null   int64
 32  opcn3_pm1        1009 non-null   float64
 33  opcn3_pm25       1009 non-null   float64
 34  opcn3_pm10       1009 non-null   float64
 35  pm1_env          1009 non-null   float64
 36  pm25_env         1009 non-null   float64
 37  pm10_env         1009 non-null   float64
 38  neph_bin0        1009 non-null   float64
 39  neph_bin1        1009 non-null   float64
 40  neph_bin2        1009 non-null   float64
 41  neph_bin3        1009 non-null   float64
 42  neph_bin4        1009 non-null   int64
 43  neph_bin5        1009 non-null   int64
 44  flag             1009 non-null   int64
 45  lat              1009 non-null   float64
 46  lon              1009 non-null   float64
 47  device_state     1009 non-null   object
 48  pm10             1009 non-null   float64
 49  pm1_model_id     1009 non-null   int64
 50  pm25_model_id    1009 non-null   int64
 51  pm25             1009 non-null   float64
 52  pm10_model_id    1009 non-null   int64
 53  pm1              1009 non-null   float64
dtypes: float64(39), int64(12), object(3)
memory usage: 433.6+ KB
</pre></div></div>
</div>
<p>The data above, from a QuantAQ MODULAIR-PM, contains a total of 53 columns in addition to the timestamp column that has been set as the index. The ‘binned’ data corresponding to the OPCs bins are labeled with the format “bin” where “x” is an integer between 0 and 23 (24 total size bins). Each bin contains the particle concentration (pp/cc) at various size ranges and is the raw data we need to perform the analysis - the other columns are considered meta data and are not explicitly needed. There
is no need to remove the columns prior to continuing on.</p>
<p>Now that we have the data in the proper format, we can go ahead and discuss the <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code> object.</p>
</div>
</div>
<div class="section" id="The-GenericParticleSizer-object">
<h2>The <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code> object<a class="headerlink" href="#The-GenericParticleSizer-object" title="Permalink to this headline">#</a></h2>
<p>The heart of the <code class="docutils literal notranslate"><span class="pre">py-smps</span></code> library is the <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code> obejct. The <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code> object is the base class for all available particle sizing instruments and contains all of the basic functionality and methods used for making calculations and/or figures. A <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code> assumes the following about any instrument:</p>
<ol class="arabic simple">
<li><p>Raw data can be represented as a dataframe where there is one column for each particle size bin</p></li>
<li><p>The instrument sizes particles into ‘bins’ which have a left boundary, midpoint, and right boundary</p></li>
</ol>
<p>That’s it. Those are the only two things that must be true for the instrument and instrument data to work with this library.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are creating a custom <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code> object, there is a helper function for creating the 3xn array needed to properly define size bins (<code class="docutils literal notranslate"><span class="pre">smps.utils.make_bins</span></code>).</p>
</div>
<p>In addition to the <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code> object, which is the parent class, there are a number of child classes for individual instruments that make working with them easier. These include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SMPS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Grimm11D</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">POPS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ParticlesPlus</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AlphasenseOPCN2</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AlphasenseOPCN3</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Modulair</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ModulairPM</span></code></p></li>
</ul>
<p>All of these classes have the same methods and capabilities of their parent class and it is recommended you use one of these classes where appropriate. If you use the parent class, you will need to define the size bins yourself and is only recommended when you have either changed the default parameters of the instrument or you are working with an instrument that is not supported by default.</p>
<p>For the rest of this tutorial, we will use the data we loaded above for the QuantAQ MODULAIR-PM device. We will walk through the basic functionality of the <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code> class as shown via the <code class="docutils literal notranslate"><span class="pre">ModulairPM</span></code> class.</p>
<div class="section" id="Initializing-an-instance-of-the-GenericParticleSizer-class">
<h3>Initializing an instance of the <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code> class<a class="headerlink" href="#Initializing-an-instance-of-the-GenericParticleSizer-class" title="Permalink to this headline">#</a></h3>
<p>To begin, we need to create an instance of the object with the data. Since we are working with data from a QuantAQ MODULAIR-PM, we will use the <code class="docutils literal notranslate"><span class="pre">ModulairPM</span></code> class:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the data into a ModulairPM object</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">smps</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">ModulairPM</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Explore-the-attributes-of-the-GenericParticleSizer">
<h3>Explore the attributes of the <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code><a class="headerlink" href="#Explore-the-attributes-of-the-GenericParticleSizer" title="Permalink to this headline">#</a></h3>
<p>Let’s begin by exploring all of the attributes available to us. As mentioned above, all <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code> objects are defined by their data and bins. To view the bin definition, you can use the <code class="docutils literal notranslate"><span class="pre">bins</span></code> attribute:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">bins</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([[ 0.35 ,  0.405,  0.46 ],
       [ 0.46 ,  0.56 ,  0.66 ],
       [ 0.66 ,  0.83 ,  1.   ],
       [ 1.   ,  1.15 ,  1.3  ],
       [ 1.3  ,  1.5  ,  1.7  ],
       [ 1.7  ,  2.   ,  2.3  ],
       [ 2.3  ,  2.65 ,  3.   ],
       [ 3.   ,  3.5  ,  4.   ],
       [ 4.   ,  4.6  ,  5.2  ],
       [ 5.2  ,  5.85 ,  6.5  ],
       [ 6.5  ,  7.25 ,  8.   ],
       [ 8.   ,  9.   , 10.   ],
       [10.   , 11.   , 12.   ],
       [12.   , 13.   , 14.   ],
       [14.   , 15.   , 16.   ],
       [16.   , 17.   , 18.   ],
       [18.   , 19.   , 20.   ],
       [20.   , 21.   , 22.   ],
       [22.   , 23.5  , 25.   ],
       [25.   , 26.5  , 28.   ],
       [28.   , 29.5  , 31.   ],
       [31.   , 32.5  , 34.   ],
       [34.   , 35.5  , 37.   ],
       [37.   , 38.5  , 40.   ]])
</pre></div></div>
</div>
<p>We see a 3xn array where each bin is defined by its left boundary, midpoint, and right boundary. The units for these values are µm.</p>
<p>If you want to grab just the midpoints, we can use the <code class="docutils literal notranslate"><span class="pre">midpoints</span></code> attribute which returns a 1xn array:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">midpoints</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([ 0.405,  0.56 ,  0.83 ,  1.15 ,  1.5  ,  2.   ,  2.65 ,  3.5  ,
        4.6  ,  5.85 ,  7.25 ,  9.   , 11.   , 13.   , 15.   , 17.   ,
       19.   , 21.   , 23.5  , 26.5  , 29.5  , 32.5  , 35.5  , 38.5  ])
</pre></div></div>
</div>
<p>We mentioned above that any additional columns are available as meta data - those can be accessed via the <code class="docutils literal notranslate"><span class="pre">scan_stats</span></code> attribute:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">scan_stats</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>sample_temp</th>
      <th>pm25_env</th>
      <th>pm1</th>
      <th>pm1_model_id</th>
      <th>lon</th>
      <th>timestamp_local</th>
      <th>neph_bin1</th>
      <th>flag</th>
      <th>pm25</th>
      <th>...</th>
      <th>pm25_model_id</th>
      <th>neph_bin0</th>
      <th>pm10_env</th>
      <th>pm10</th>
      <th>device_state</th>
      <th>opcn3_rh</th>
      <th>neph_bin3</th>
      <th>neph_bin4</th>
      <th>neph_bin2</th>
      <th>pm10_model_id</th>
    </tr>
    <tr>
      <th>timestamp</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-02-15 21:27:30+00:00</th>
      <td>87893809</td>
      <td>7.00</td>
      <td>0.0</td>
      <td>0.3809</td>
      <td>3380</td>
      <td>-103.757</td>
      <td>2022-02-15T14:27:30Z</td>
      <td>40.625</td>
      <td>0</td>
      <td>0.6173</td>
      <td>...</td>
      <td>3381</td>
      <td>47.625</td>
      <td>0.0</td>
      <td>2.5584</td>
      <td>ACTIVE</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>3382</td>
    </tr>
    <tr>
      <th>2022-02-15 21:26:30+00:00</th>
      <td>87893808</td>
      <td>6.99</td>
      <td>0.0</td>
      <td>0.3383</td>
      <td>3380</td>
      <td>-103.757</td>
      <td>2022-02-15T14:26:30Z</td>
      <td>40.875</td>
      <td>0</td>
      <td>0.7299</td>
      <td>...</td>
      <td>3381</td>
      <td>42.250</td>
      <td>0.0</td>
      <td>0.8970</td>
      <td>ACTIVE</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>3382</td>
    </tr>
    <tr>
      <th>2022-02-15 21:25:30+00:00</th>
      <td>87893807</td>
      <td>6.98</td>
      <td>0.0</td>
      <td>0.3091</td>
      <td>3380</td>
      <td>-103.757</td>
      <td>2022-02-15T14:25:30Z</td>
      <td>36.125</td>
      <td>0</td>
      <td>0.6270</td>
      <td>...</td>
      <td>3381</td>
      <td>38.625</td>
      <td>0.0</td>
      <td>2.0459</td>
      <td>ACTIVE</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>3382</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 30 columns</p>
</div></div>
</div>
<p>You will notice that the above call returns all columns in the original data that are not “binned” particle concentrations.</p>
<p>Next, there are a number of different ways in which you can grab and view the raw data, all available as attributes. These include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dn</span></code>: particle number concentration by bin</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ds</span></code>: surface area by bin</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dv</span></code>: volume by bin</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dndlogdp</span></code>: normalized particle number concentration by bin</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dsdlogdp</span></code>: normalized surface area by bin</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dvdlogdp</span></code>: normalized volume by bin</p></li>
</ul>
<p>As an example, here is the number concentation by bin:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">dn</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>bin0</th>
      <th>bin1</th>
      <th>bin2</th>
      <th>bin3</th>
      <th>bin4</th>
      <th>bin5</th>
      <th>bin6</th>
      <th>bin7</th>
      <th>bin8</th>
      <th>bin9</th>
      <th>...</th>
      <th>bin14</th>
      <th>bin15</th>
      <th>bin16</th>
      <th>bin17</th>
      <th>bin18</th>
      <th>bin19</th>
      <th>bin20</th>
      <th>bin21</th>
      <th>bin22</th>
      <th>bin23</th>
    </tr>
    <tr>
      <th>timestamp</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-02-15 21:27:30+00:00</th>
      <td>1.5300</td>
      <td>0.2194</td>
      <td>0.0579</td>
      <td>0.0064</td>
      <td>0.0097</td>
      <td>0.0129</td>
      <td>0.0129</td>
      <td>0.0032</td>
      <td>0.0033</td>
      <td>0.0000</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-02-15 21:26:30+00:00</th>
      <td>1.6633</td>
      <td>0.1843</td>
      <td>0.0811</td>
      <td>0.0225</td>
      <td>0.0228</td>
      <td>0.0227</td>
      <td>0.0163</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-02-15 21:25:30+00:00</th>
      <td>1.6052</td>
      <td>0.1605</td>
      <td>0.0767</td>
      <td>0.0134</td>
      <td>0.0132</td>
      <td>0.0133</td>
      <td>0.0201</td>
      <td>0.0033</td>
      <td>0.0033</td>
      <td>0.0033</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 24 columns</p>
</div></div>
</div>
<p>And here is the normalized number concentration by bin:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">dndlogdp</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>bin0</th>
      <th>bin1</th>
      <th>bin2</th>
      <th>bin3</th>
      <th>bin4</th>
      <th>bin5</th>
      <th>bin6</th>
      <th>bin7</th>
      <th>bin8</th>
      <th>bin9</th>
      <th>...</th>
      <th>bin14</th>
      <th>bin15</th>
      <th>bin16</th>
      <th>bin17</th>
      <th>bin18</th>
      <th>bin19</th>
      <th>bin20</th>
      <th>bin21</th>
      <th>bin22</th>
      <th>bin23</th>
    </tr>
    <tr>
      <th>timestamp</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-02-15 21:27:30+00:00</th>
      <td>12.890747</td>
      <td>1.399359</td>
      <td>0.320854</td>
      <td>0.056168</td>
      <td>0.083258</td>
      <td>0.098264</td>
      <td>0.111791</td>
      <td>0.025613</td>
      <td>0.028962</td>
      <td>0.000000</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-02-15 21:26:30+00:00</th>
      <td>14.013843</td>
      <td>1.175487</td>
      <td>0.449417</td>
      <td>0.197467</td>
      <td>0.195699</td>
      <td>0.172914</td>
      <td>0.141256</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2022-02-15 21:25:30+00:00</th>
      <td>13.524331</td>
      <td>1.023688</td>
      <td>0.425034</td>
      <td>0.117602</td>
      <td>0.113299</td>
      <td>0.101311</td>
      <td>0.174187</td>
      <td>0.026413</td>
      <td>0.028962</td>
      <td>0.034052</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 24 columns</p>
</div></div>
</div>
</div>
<div class="section" id="Explore-the-methods-of-the-GenericParticleSizer">
<h3>Explore the methods of the <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code><a class="headerlink" href="#Explore-the-methods-of-the-GenericParticleSizer" title="Permalink to this headline">#</a></h3>
<p>There are several key methods available under the <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code> class that allow you to quickly and easily compute various parameters. They can be summarized as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">copy</span></code>: create a copy of the model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dump</span></code>: save a local copy of the model to disk</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resample</span></code>: resample data onto a new time basis</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice</span></code>: slice the data between two datetimes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stats</span></code>: compute the aerosol size distribution statistics (e.g., number of particles, GM, GSD, etc.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">integrate</span></code>: compute the integrated number, surface area, volume, or mass between two diameters</p></li>
</ul>
<p>Below, we will walk through each of these methods to demonstrate their capabilities and document their use cases.</p>
<div class="section" id="copy">
<h4><code class="docutils literal notranslate"><span class="pre">copy</span></code><a class="headerlink" href="#copy" title="Permalink to this headline">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">copy</span></code> method is used to create a copy of the model so that you can <em>slice</em> it or modify it in some non-reversible way:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">obj2</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;smps.models.ModulairPM at 0x1502104f0&gt;
</pre></div></div>
</div>
</div>
<div class="section" id="dump">
<h4><code class="docutils literal notranslate"><span class="pre">dump</span></code><a class="headerlink" href="#dump" title="Permalink to this headline">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">dump</span></code> method is used to pickle and save a copy of the file locally to <code class="docutils literal notranslate"><span class="pre">filepath</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="s2">&quot;smps-obj-1.sav&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;smps-obj-1.sav&#39;]
</pre></div></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, this file must be in the same directory as you’re currently working, otherwise <code class="docutils literal notranslate"><span class="pre">joblib</span></code> will be unhappy.</p>
</div>
</div>
<div class="section" id="resample">
<h4><code class="docutils literal notranslate"><span class="pre">resample</span></code><a class="headerlink" href="#resample" title="Permalink to this headline">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">resample</span></code> method allows you to resample your data onto a new time base. For example, if you originially are working with 1-minute data, but want to work with hourly data, you can resample:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rs</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">rs</span><span class="o">=</span><span class="s1">&#39;1h&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="slice">
<h4><code class="docutils literal notranslate"><span class="pre">slice</span></code><a class="headerlink" href="#slice" title="Permalink to this headline">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">slice</span></code> method allows you to quickly remove all data that is not between the <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> timestamps. You can use the <code class="docutils literal notranslate"><span class="pre">inplace</span></code> argument to determine whether a new copy is returned or the current data is overwritten:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">&quot;2022-02-15 22:00&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2022-02-15 04:00&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="stats">
<h4><code class="docutils literal notranslate"><span class="pre">stats</span></code><a class="headerlink" href="#stats" title="Permalink to this headline">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">stats</span></code> method allows you to easily calculate common aerosol distribution statistics as weighted by one of (‘number’, ‘surface’, ‘volume’, or ‘mass’). The values returned include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">number</span></code>: the total number of particles</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">surface_area</span></code>: the total surface area of particles</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">volume</span></code>: the total volume of particles</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mass</span></code>: the total mass of particles</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AM</span></code>: the arithmetic mean particle diameter</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GM</span></code>: the geometric mean particle diameter</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Mode</span></code>: the mode particle diameter</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GSD</span></code>: the geometric standard deviation</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compute the number-weighted stats for the entire size distribution</span>
<span class="n">stats</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">stats</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="s1">&#39;number&#39;</span><span class="p">)</span>

<span class="n">stats</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>number</th>
      <th>surface_area</th>
      <th>volume</th>
      <th>mass</th>
      <th>AM</th>
      <th>GM</th>
      <th>Mode</th>
      <th>GSD</th>
    </tr>
    <tr>
      <th>timestamp</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-02-15 21:27:30+00:00</th>
      <td>1.8589</td>
      <td>2.542669</td>
      <td>1.171222</td>
      <td>1.932516</td>
      <td>496.016999</td>
      <td>451.248888</td>
      <td>405.0</td>
      <td>1.381490</td>
    </tr>
    <tr>
      <th>2022-02-15 21:26:30+00:00</th>
      <td>2.0130</td>
      <td>2.113701</td>
      <td>0.411202</td>
      <td>0.678483</td>
      <td>493.207899</td>
      <td>455.856515</td>
      <td>405.0</td>
      <td>1.383312</td>
    </tr>
    <tr>
      <th>2022-02-15 21:25:30+00:00</th>
      <td>1.9123</td>
      <td>2.612000</td>
      <td>0.967307</td>
      <td>1.596057</td>
      <td>504.500863</td>
      <td>454.677924</td>
      <td>405.0</td>
      <td>1.415795</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>You can also limit the diameter over which you compute statistics over using the <code class="docutils literal notranslate"><span class="pre">dmin</span></code> and <code class="docutils literal notranslate"><span class="pre">dmax</span></code> arguments:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compute the number-weighted stats for just PM2.5</span>
<span class="n">stats</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">stats</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="n">dmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">dmax</span><span class="o">=</span><span class="mf">2.5</span><span class="p">)</span>

<span class="n">stats</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>number</th>
      <th>surface_area</th>
      <th>volume</th>
      <th>mass</th>
      <th>AM</th>
      <th>GM</th>
      <th>Mode</th>
      <th>GSD</th>
    </tr>
    <tr>
      <th>timestamp</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-02-15 21:27:30+00:00</th>
      <td>1.839986</td>
      <td>1.468447</td>
      <td>0.202913</td>
      <td>0.334807</td>
      <td>460.899308</td>
      <td>441.685395</td>
      <td>405.0</td>
      <td>1.274885</td>
    </tr>
    <tr>
      <th>2022-02-15 21:26:30+00:00</th>
      <td>2.001357</td>
      <td>1.856839</td>
      <td>0.297754</td>
      <td>0.491294</td>
      <td>480.660802</td>
      <td>451.212560</td>
      <td>405.0</td>
      <td>1.344825</td>
    </tr>
    <tr>
      <th>2022-02-15 21:25:30+00:00</th>
      <td>1.888043</td>
      <td>1.594091</td>
      <td>0.239221</td>
      <td>0.394714</td>
      <td>466.448930</td>
      <td>443.238476</td>
      <td>405.0</td>
      <td>1.303166</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>We can also go ahead and compute the volume-weighted stats:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compute the volume-weighted stats for PM2.5</span>
<span class="n">stats</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">stats</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="s1">&#39;volume&#39;</span><span class="p">,</span> <span class="n">dmin</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">dmax</span><span class="o">=</span><span class="mf">2.5</span><span class="p">)</span>

<span class="n">stats</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>number</th>
      <th>surface_area</th>
      <th>volume</th>
      <th>mass</th>
      <th>AM</th>
      <th>GM</th>
      <th>Mode</th>
      <th>GSD</th>
    </tr>
    <tr>
      <th>timestamp</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-02-15 21:27:30+00:00</th>
      <td>1.839986</td>
      <td>1.468447</td>
      <td>0.202913</td>
      <td>0.334807</td>
      <td>1390.018045</td>
      <td>1087.859802</td>
      <td>405.0</td>
      <td>2.104975</td>
    </tr>
    <tr>
      <th>2022-02-15 21:26:30+00:00</th>
      <td>2.001357</td>
      <td>1.856839</td>
      <td>0.297754</td>
      <td>0.491294</td>
      <td>1492.979396</td>
      <td>1232.860263</td>
      <td>2000.0</td>
      <td>1.968189</td>
    </tr>
    <tr>
      <th>2022-02-15 21:25:30+00:00</th>
      <td>1.888043</td>
      <td>1.594091</td>
      <td>0.239221</td>
      <td>0.394714</td>
      <td>1491.962402</td>
      <td>1185.952258</td>
      <td>2650.0</td>
      <td>2.080376</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="integrate">
<h4><code class="docutils literal notranslate"><span class="pre">integrate</span></code><a class="headerlink" href="#integrate" title="Permalink to this headline">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">integrate</span></code> method is certaintly the most interesting, complex, and most used method. It can compute integrated mass values, number concentrations, and make adjustments for denstiy and hygroscopic growth! We’ll go over many such options below.</p>
<p>First, we will begin with the most common use case - integrating the number of particles between two diameters. If we want to calculate the total number of particles between two diameters, we can do as as follows:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">integrate</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="n">dmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">dmax</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
timestamp
2022-02-15 21:27:30+00:00    1.8073
2022-02-15 21:26:30+00:00    1.9287
2022-02-15 21:25:30+00:00    1.8424
2022-02-15 21:24:30+00:00    2.0080
2022-02-15 21:23:30+00:00    1.8171
                              ...
2022-02-15 04:43:32+00:00    1.2142
2022-02-15 04:42:32+00:00    1.3960
2022-02-15 04:41:32+00:00    1.2146
2022-02-15 04:40:32+00:00    1.3789
2022-02-15 04:39:32+00:00    1.3231
Length: 1009, dtype: float64
</pre></div></div>
</div>
<p>If we want to compute the PM1 value (integrated mass between 0 and 1 µm):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">integrate</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="s1">&#39;mass&#39;</span><span class="p">,</span> <span class="n">dmin</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">dmax</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">rho</span><span class="o">=</span><span class="mf">1.65</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
timestamp
2022-02-15 21:27:30+00:00    0.149699
2022-02-15 21:26:30+00:00    0.163484
2022-02-15 21:25:30+00:00    0.154365
2022-02-15 21:24:30+00:00    0.155946
2022-02-15 21:23:30+00:00    0.143755
                               ...
2022-02-15 04:43:32+00:00    0.093075
2022-02-15 04:42:32+00:00    0.106044
2022-02-15 04:41:32+00:00    0.098637
2022-02-15 04:40:32+00:00    0.111538
2022-02-15 04:39:32+00:00    0.109767
Length: 1009, dtype: float64
</pre></div></div>
</div>
<p>Above, we assumed a constant density of 1.65 g/cm3; however, the <code class="docutils literal notranslate"><span class="pre">integrate</span></code> method also supports custom functions to compute density as a function of particle diameter. To do so, you simply need to provide a callable function that will return the desired density as a function of particle diameter in µm. For example, if we want to compute PM10 and assume that density is 1.65 g/cm3 below 3µm and 2.5 g/cm3 above 3 µm:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">custom_density</span><span class="p">(</span><span class="n">dp</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate density as a function of particle diameter in µm.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dp : float</span>
<span class="sd">        Particle diameter in microns.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mf">1.65</span> <span class="k">if</span> <span class="n">dp</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="k">else</span> <span class="mf">2.5</span>

<span class="c1"># Compute PM10</span>
<span class="n">obj</span><span class="o">.</span><span class="n">integrate</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="s1">&#39;mass&#39;</span><span class="p">,</span> <span class="n">dmin</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">dmax</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> <span class="n">rho</span><span class="o">=</span><span class="n">custom_density</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
timestamp
2022-02-15 21:27:30+00:00    2.679262
2022-02-15 21:26:30+00:00    0.678483
2022-02-15 21:25:30+00:00    2.096019
2022-02-15 21:24:30+00:00    1.577014
2022-02-15 21:23:30+00:00    1.631535
                               ...
2022-02-15 04:43:32+00:00    0.849622
2022-02-15 04:42:32+00:00    1.532512
2022-02-15 04:41:32+00:00    2.868572
2022-02-15 04:40:32+00:00    5.942367
2022-02-15 04:39:32+00:00    2.217525
Length: 1009, dtype: float64
</pre></div></div>
</div>
<p>One additional very cool feature is the ability to correct measurements for hygroscopic growth! While this likely isn’t relevant for research or EPA FEM instrumentation, hygroscopic growth due to water uptake is a big challenge for optical instruments operating in ambient environments without inline driers. While there are several peer-reviewed approaches to correcting for such growth, we follow an approach originally proposed by <a class="reference external" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6164928/">Di Antonio et al
(2018)</a> which corrects the size of the underlying bins prior to computing the step-wise integration.</p>
<p>To compute integrated mass values post hygroscopic-growth corection, you must provide a few pieces of additional information:</p>
<ol class="arabic simple">
<li><p>You must provide an estimate for the hygroscopic growth correction factor, kappa. This can be either a constant or a callable function</p></li>
<li><p>You must provide the column name where relative humidity is stored</p></li>
</ol>
<p>For example, if we want to compute the corrected PM1 value with a fixed kappa of 0.3:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">integrate</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="s1">&#39;mass&#39;</span><span class="p">,</span> <span class="n">dmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">dmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">kappa</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">rh</span><span class="o">=</span><span class="s1">&#39;sample_rh&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
timestamp
2022-02-15 21:27:30+00:00    0.127272
2022-02-15 21:26:30+00:00    0.143090
2022-02-15 21:25:30+00:00    0.133221
2022-02-15 21:24:30+00:00    0.133941
2022-02-15 21:23:30+00:00    0.124912
                               ...
2022-02-15 04:43:32+00:00    0.081037
2022-02-15 04:42:32+00:00    0.095688
2022-02-15 04:41:32+00:00    0.085639
2022-02-15 04:40:32+00:00    0.098006
2022-02-15 04:39:32+00:00    0.093921
Length: 1009, dtype: float64
</pre></div></div>
</div>
<p>If we want to define a complex callable function for kappa alongside a callable function for density:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">custom_density</span><span class="p">(</span><span class="n">dp</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate density as a function of particle diameter in µm.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dp : float</span>
<span class="sd">        Particle diameter in microns.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mf">1.65</span> <span class="k">if</span> <span class="n">dp</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="k">else</span> <span class="mf">2.5</span>

<span class="k">def</span> <span class="nf">custom_kappa</span><span class="p">(</span><span class="n">dp</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate kappa as a function of particle diameter in µm.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dp : float</span>
<span class="sd">        Particle diameter in microns.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mf">0.3</span> <span class="k">if</span> <span class="n">dp</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="mf">0.05</span>

<span class="c1"># Compute PM10</span>
<span class="n">obj</span><span class="o">.</span><span class="n">integrate</span><span class="p">(</span>
    <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;mass&#39;</span><span class="p">,</span> <span class="n">dmin</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">dmax</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span>
    <span class="n">rho</span><span class="o">=</span><span class="n">custom_density</span><span class="p">,</span> <span class="n">kappa</span><span class="o">=</span><span class="n">custom_kappa</span><span class="p">,</span> <span class="n">rh</span><span class="o">=</span><span class="s1">&#39;sample_rh&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
timestamp
2022-02-15 21:27:30+00:00    2.578059
2022-02-15 21:26:30+00:00    0.638148
2022-02-15 21:25:30+00:00    2.014149
2022-02-15 21:24:30+00:00    1.508324
2022-02-15 21:23:30+00:00    1.562393
                               ...
2022-02-15 04:43:32+00:00    0.811724
2022-02-15 04:42:32+00:00    1.471832
2022-02-15 04:41:32+00:00    2.768024
2022-02-15 04:40:32+00:00    5.742915
2022-02-15 04:39:32+00:00    2.510176
Length: 1009, dtype: float64
</pre></div></div>
</div>
<p>That about sums up the basic functionality for the <code class="docutils literal notranslate"><span class="pre">py-smps</span></code> library. For more detailed information, please check out the API documentation and/or the additional guides that cover more specific topics.</p>
</div>
</div>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="Visualizations.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Visualizations</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Guides</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, QuantAQ, Inc.
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">An introduction to py-smps</a><ul>
<li><a class="reference internal" href="#Working-with-data">Working with data</a><ul>
<li><a class="reference internal" href="#Example-datasets">Example datasets</a></li>
<li><a class="reference internal" href="#Working-with-SMPS-data-from-AIM">Working with SMPS data from AIM</a></li>
<li><a class="reference internal" href="#Working-with-data-via-a-csv-file">Working with data via a csv file</a></li>
</ul>
</li>
<li><a class="reference internal" href="#The-GenericParticleSizer-object">The <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code> object</a><ul>
<li><a class="reference internal" href="#Initializing-an-instance-of-the-GenericParticleSizer-class">Initializing an instance of the <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code> class</a></li>
<li><a class="reference internal" href="#Explore-the-attributes-of-the-GenericParticleSizer">Explore the attributes of the <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code></a></li>
<li><a class="reference internal" href="#Explore-the-methods-of-the-GenericParticleSizer">Explore the methods of the <code class="docutils literal notranslate"><span class="pre">GenericParticleSizer</span></code></a><ul>
<li><a class="reference internal" href="#copy"><code class="docutils literal notranslate"><span class="pre">copy</span></code></a></li>
<li><a class="reference internal" href="#dump"><code class="docutils literal notranslate"><span class="pre">dump</span></code></a></li>
<li><a class="reference internal" href="#resample"><code class="docutils literal notranslate"><span class="pre">resample</span></code></a></li>
<li><a class="reference internal" href="#slice"><code class="docutils literal notranslate"><span class="pre">slice</span></code></a></li>
<li><a class="reference internal" href="#stats"><code class="docutils literal notranslate"><span class="pre">stats</span></code></a></li>
<li><a class="reference internal" href="#integrate"><code class="docutils literal notranslate"><span class="pre">integrate</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>